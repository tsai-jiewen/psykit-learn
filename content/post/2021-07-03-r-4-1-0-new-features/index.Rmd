---
title: "R 4.1.0 new features"
author: 'JW Tsai'
date: '2021-07-03'
slug: 'r-4-1-0-new-features'
categories: 
  - R
---

### Native pipe

```{r}
# R 4.1.0
rnorm(100, mean = 4, sd = 1) |>
  density() |>
  plot()
```

### Short anonymous function

```{r}
F1 <- \(x) x^2 + 2*x + 1
class(F1)
Deriv::Deriv(F1)
curve(F1)
```

### Amazing operation

```{r}
mtcars |>
  subset(cyl == 4) |> 
  {\(d) lm(mpg ~ disp, data = d)}()
```

or

```{r}
lm_d <- \(d) lm(mpg ~ disp, data = d)
mtcars |>
  subset(cyl == 4) |> 
  lm_d()
```
